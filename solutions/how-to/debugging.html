<!DOCTYPE html>
<html>
<head>
	<title>Debugging | Persoo tutorial</title>

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="../demo-all.css" rel="stylesheet" media="screen">

	<!-- set variables we pass to Persoo ------------------------------------------------ -->
	<script type="text/javascript">
		// Page properties and variables passed from backend server
		var dataLayer = [{
		}];
	</script>

	<!-- load Persoo library ----------------------------------------------------------- -->
	<script>
		<%= persooClientLoader %>

		// Commands
		persoo('send', dataLayer);
	</script>
</head>
<body>
    <div class="container-fluid">
    	<div class="row-fluid">
		    <div id="localNavigation" class="span2">
    			<!--Sidebar content-->
    		</div>
    		<div id="main" class="span8">
    			<!--Body content-->
    			<h1>Debugging</h1>

				<p>
				Deploying Persoo to your website is a piece of cake as it is well-equipped with various debugging tools.

				<h2>Persoo debug console</h2>

				<p>Now you can see the debug console on the right (it's implicitly open everywhere in the demo).

				<p>What you will find in the console:
				<ul>
					<li>Data - data that were exported from Persoo to your page, and
					javascript functions that were triggered in the page.
					<li>User space - all data stored in Persoo for the current user.
					<li>Log - Persoo client log (requests sent to Persoo, responses received, etc.)
				</ul>

				<p>The console is refreshed only when a page is loaded.
				If you want to see the current state in case you made some events while staying on the same page,
				you need to press the refresh icon.

				<p>If you need to open Persoo debug console on any live web page that is using Persoo, run the command

				<pre class="prettyprint lang-js">persoo('showDebugConsole');</pre>

				<p>in your browser debug console (F12 in Firefox, Chrome, ...). 
				For closing console, click on "X"  or use 
				
				<pre class="prettyprint lang-js">persoo('hideDebugConsole');</pre>

				<h2>Logging to browser console</h2>

				<p>If you want to log all Persoo messages to browser console, set the
				cookie "persooDebug" to true and reload page.

				<p>To set the cookie in browser console, run
				<pre class="prettyprint lang-js">document.cookie="persooDebug=true"</pre>

				<h2>Persoo environments</h2>

				<p>To simplify workflow debugging, you can use different environments.
				Play with Persoo configuration in a test environment, and when you are happy
				with your changes, commit the configuration to the production environment.

				<p>Persoo tracks versions, so you can always roll back.

				<p>To change the environment you use in your browser, set the cookie "persooEnviroment". 
				You can do it also by calling following function from browser console:	
				
				<pre class="prettyprint lang-js">persoo('setEnvironment','yourEnvName'); // by the end of session
persoo('setEnvironment','yourEnvName', 7); // for next 7 days
var date = new Date("July 21, 2013 01:15:00")
persoo('setEnvironment','yourEnvName', date ); // by given date
persoo('unsetEnvironment')   // set production environment
</pre>

                <!-- You can simply set it in Admin, using Environment selector. TODO finish this. -->
                
				<p>Use Persoo Admin for copying configuration among environments
				or for copying data of selected users from the production to a test environment.

    		</div>
    		<div id="tips" class="span2">
    			<!--Tips and messages -->
    			<div class="alert alert-info">
  				Tip: Create bookmark with href "javascript: persoo('showDebugConsole');" to easily open Persoo console.
				</div>

    		</div>
    	</div>
    </div>

	<!-- jQuery + Twitter Bootstrap + Persoo Demo Navigations + show debug console -->
	<script src="../demo-all.js" type="text/javascript"></script>
</body>
</html>
